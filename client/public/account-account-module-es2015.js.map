{"version":3,"sources":["./src/app/account/account-routing.module.ts","./src/app/account/account.module.ts","./src/app/account/auth/auth-routing.ts","./src/app/account/auth/auth.module.ts","./src/app/account/auth/login/login.component.ts","./src/app/account/auth/login/login.component.html"],"names":[],"mappings":"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","file":"account-account-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: 'login', loadChildren: () => import('./auth/auth.module').then(m => m.AuthModule) },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AccountRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AccountRoutingModule } from './account-routing.module';\nimport { AuthModule } from './auth/auth.module';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  declarations: [],\n  imports: [\n    HttpClientModule,\n    FormsModule,\n    CommonModule,\n    AccountRoutingModule,\n    AuthModule\n  ]\n})\nexport class AccountModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginComponent } from './login/login.component';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: LoginComponent\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class AuthRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AuthRoutingModule } from './auth-routing';\n\n// Forms\nimport { ReactiveFormsModule } from '@angular/forms';\n\n// Components\nimport { LoginComponent } from './login/login.component';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [\n    HttpClientModule,\n    FormsModule,\n    CommonModule,\n    AuthRoutingModule,\n    ReactiveFormsModule,\n  ]\n})\nexport class AuthModule { }\n","import {\n  Component,\n  OnInit\n} from '@angular/core';\nimport {\n  Router\n} from '@angular/router';\nimport {\n  FormBuilder,\n  Validators,\n  FormGroup\n} from '@angular/forms';\n\n// Libs\nimport {\n  CookieService\n} from 'ngx-cookie-service';\nimport Swal from 'sweetalert2'\n\n// Services\nimport {\n  AuthService\n} from 'src/app/core/services/auth/auth.service';\nimport { FirestoreService } from 'src/app/core/services/firestore/firestore.service';\n\ntype UserFields = 'email' | 'password';\ntype FormErrors = {\n  [u in UserFields]: string\n};\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  // User\n  userData: any;\n\n  public newUser = false;\n  public loginForm: FormGroup;\n  public formErrors: FormErrors = {\n    'email': '',\n    'password': '',\n  };\n  public errorMessage: any;\n  public loginButton = false;\n  public errorGeneral = '';\n\n  email: any;\n  password: any;\n\n  constructor(\n    private fb: FormBuilder,\n    private router: Router,\n    private cookieService: CookieService,\n    private authService: AuthService,\n    private firestoreService: FirestoreService,\n  ) {}\n\n  ngOnInit(): void {}\n\n  login() {\n    this.router.navigate(['./admin']);\n  }\n\n  handleLogin() {\n    this.authService.login(this.email, this.password)\n      .then((user) => {\n        console.log(user)\n        this.handleCookieAsigned(this.email);\n      }).catch((error: any) => {\n        this.errorAlert('Error Login', error.message);\n      });\n  }\n\n  async handleCookieAsigned(email) {\n    this.cookieService.set('email', email);\n    console.log(email);\n    await this.firestoreService.getUser(email).then(info => {\n      info.docs.map(doc => {\n        const userData = doc.data();\n        console.log(userData);\n\n        if (userData.status === 1) {\n          if (userData.login === 0) {\n            this.userData = userData;\n            console.log(this.userData);\n            this.handleAssginedCookies(userData);\n          } else {\n            this.handleAssginedCookies(userData);\n          }\n        } else {\n          this.handleFirebaselogout();\n          this.userDisable();\n          this.loginButton = false;\n        }\n      });\n    });\n  };\n\n  handleAssginedCookies(userData){\n    this.cookieService.set('name', `${userData.firstName}`);\n    this.cookieService.set('roleType', userData.roleType);\n    this.cookieService.set('uid', userData.uid);\n    if (userData.roleType === 1) this.router.navigate(['./admin']);\n    // else if (userData.roleType === 2) this.router.navigate(['./admin']);\n    // else if (userData.roleType === 3) this.router.navigate(['./user']); \n    // else if (userData.roleType === 4) this.router.navigate(['./technical']); \n    else this.handleFirebaselogout();\n  }\n\n\n  userDisable() {\n    Swal.fire({\n      icon: 'error',\n      title: 'Oops...',\n      text: 'Parece que tu usuario no se encuentra activo.',\n      footer: '<a href>Contactar con soporte.</a>'\n    })\n  }\n\n  errorAlert(title: string, body: string) {\n    Swal.fire(\n      title,\n      body,\n      'error'\n    ).then((resp => {\n      this.loginButton = false;\n    }))\n  }\n\n  handleFirebaselogout() {\n\n  }\n\n}","<div class=\"container-fluid\">\n\t<div class=\"row\">\n\t  <div class=\"col-sm-4\">\n\t\t<img class=\"bg\" src=\"assets/imgs/bg.png\" alt=\"\">\n\n\t\t<div class=\"col-sm-4 login-section-wrapper\">\n\t\t  <div class=\"brand-wrapper\">\n\t\t\t<img src=\"assets/img/marketin.png\" alt=\"logo\" class=\"logo\">\n\t\t  </div>\n\t\t  <div class=\"login-wrapper my-auto\">\n\t\t\t  <div class=\"form-group\">\n\t\t\t\t<img class=\"icon\" src=\"assets/imgs/usuario.svg\" alt=\"\">\n\t\t\t\t<input [(ngModel)]=\"email\" type=\"email\" name=\"email\" id=\"email\" class=\"form-control ip\" placeholder=\"Usuario\">\n\t\t\t  </div>\n\t\t\t  <br>\n\t\t\t  <div class=\"form-group mb-4\">\n\t\t\t\t<img class=\"icon\" src=\"assets/imgs/lock.png\" alt=\"\">\n\t\t\t\t<input [(ngModel)]=\"password\" type=\"password\" name=\"password\" id=\"password\" class=\"form-control ip\" placeholder=\"Contraseña\">\n\t\t\t  </div>\n\t\t\t  <button (click)=\"handleLogin()\" class=\"btn buton\">INGRESAR</button>\n\t\t\t<br> <br>\n\t\t\t<!-- <a href=\"#!\" class=\"forgot-password-link\">¿Olvidaste tu contraseña?</a> -->\n\t\t\t<!-- <p class=\"login-wrapper-footer-text\">¿Olvidaste tu contraseña? </p> -->\n\t\t  </div>\n\t\t</div>\n\t  </div>\n\t  <div class=\"col-sm-8 px-0 d-none d-sm-block\">\n\t\t<h1 class=\"label\">Administrador</h1>\n\t\t<h1 class=\"label2\">MARKET IN</h1>\n\t\t<!-- <h1 class=\"label3\">Industrial Hivimar</h1> -->\n\n\t\t<p class=\"label-p\">Sistema de control interno MARKETIN</p>\n\t\t<img src=\"assets/imgs/bg_login.png\" alt=\"login image\" class=\"login-img\">\n\t  </div>\n\t</div>\n  </div>\n"],"sourceRoot":"webpack:///"}