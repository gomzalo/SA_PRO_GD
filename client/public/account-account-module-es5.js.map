{"version":3,"sources":["webpack:///src/app/account/account-routing.module.ts","webpack:///src/app/account/account.module.ts","webpack:///src/app/account/auth/auth-routing.ts","webpack:///src/app/account/auth/auth.module.ts","webpack:///src/app/account/auth/login/login.component.ts","webpack:///src/app/account/auth/login/login.component.html"],"names":["routes","path","loadChildren","then","m","AuthModule","AccountRoutingModule","forChild","imports","exports","AccountModule","declarations","component","AuthRoutingModule","LoginComponent","fb","router","cookieService","authService","firestoreService","newUser","formErrors","loginButton","errorGeneral","navigate","login","email","password","user","console","log","handleCookieAsigned","error","errorAlert","message","set","getUser","info","docs","map","doc","userData","data","status","handleAssginedCookies","handleFirebaselogout","userDisable","firstName","roleType","uid","fire","icon","title","text","footer","body","resp","handleLogin","selector","templateUrl","styleUrls"],"mappings":"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","file":"account-account-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n  { path: 'login', loadChildren: () => import('./auth/auth.module').then(m => m.AuthModule) },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AccountRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AccountRoutingModule } from './account-routing.module';\nimport { AuthModule } from './auth/auth.module';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  declarations: [],\n  imports: [\n    HttpClientModule,\n    FormsModule,\n    CommonModule,\n    AccountRoutingModule,\n    AuthModule\n  ]\n})\nexport class AccountModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginComponent } from './login/login.component';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: LoginComponent\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class AuthRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AuthRoutingModule } from './auth-routing';\n\n// Forms\nimport { ReactiveFormsModule } from '@angular/forms';\n\n// Components\nimport { LoginComponent } from './login/login.component';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [\n    HttpClientModule,\n    FormsModule,\n    CommonModule,\n    AuthRoutingModule,\n    ReactiveFormsModule,\n  ]\n})\nexport class AuthModule { }\n","import {\n  Component,\n  OnInit\n} from '@angular/core';\nimport {\n  Router\n} from '@angular/router';\nimport {\n  FormBuilder,\n  Validators,\n  FormGroup\n} from '@angular/forms';\n\n// Libs\nimport {\n  CookieService\n} from 'ngx-cookie-service';\nimport Swal from 'sweetalert2'\n\n// Services\nimport {\n  AuthService\n} from 'src/app/core/services/auth/auth.service';\nimport { FirestoreService } from 'src/app/core/services/firestore/firestore.service';\n\ntype UserFields = 'email' | 'password';\ntype FormErrors = {\n  [u in UserFields]: string\n};\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  // User\n  userData: any;\n\n  public newUser = false;\n  public loginForm: FormGroup;\n  public formErrors: FormErrors = {\n    'email': '',\n    'password': '',\n  };\n  public errorMessage: any;\n  public loginButton = false;\n  public errorGeneral = '';\n\n  email: any;\n  password: any;\n\n  constructor(\n    private fb: FormBuilder,\n    private router: Router,\n    private cookieService: CookieService,\n    private authService: AuthService,\n    private firestoreService: FirestoreService,\n  ) {}\n\n  ngOnInit(): void {}\n\n  login() {\n    this.router.navigate(['./admin']);\n  }\n\n  handleLogin() {\n    this.authService.login(this.email, this.password)\n      .then((user) => {\n        console.log(user)\n        this.handleCookieAsigned(this.email);\n      }).catch((error: any) => {\n        this.errorAlert('Error Login', error.message);\n      });\n  }\n\n  async handleCookieAsigned(email) {\n    this.cookieService.set('email', email);\n    console.log(email);\n    await this.firestoreService.getUser(email).then(info => {\n      info.docs.map(doc => {\n        const userData = doc.data();\n        console.log(userData);\n\n        if (userData.status === 1) {\n          if (userData.login === 0) {\n            this.userData = userData;\n            console.log(this.userData);\n            this.handleAssginedCookies(userData);\n          } else {\n            this.handleAssginedCookies(userData);\n          }\n        } else {\n          this.handleFirebaselogout();\n          this.userDisable();\n          this.loginButton = false;\n        }\n      });\n    });\n  };\n\n  handleAssginedCookies(userData){\n    this.cookieService.set('name', `${userData.firstName}`);\n    this.cookieService.set('roleType', userData.roleType);\n    this.cookieService.set('uid', userData.uid);\n    if (userData.roleType === 1) this.router.navigate(['./admin']);\n    // else if (userData.roleType === 2) this.router.navigate(['./admin']);\n    // else if (userData.roleType === 3) this.router.navigate(['./user']); \n    // else if (userData.roleType === 4) this.router.navigate(['./technical']); \n    else this.handleFirebaselogout();\n  }\n\n\n  userDisable() {\n    Swal.fire({\n      icon: 'error',\n      title: 'Oops...',\n      text: 'Parece que tu usuario no se encuentra activo.',\n      footer: '<a href>Contactar con soporte.</a>'\n    })\n  }\n\n  errorAlert(title: string, body: string) {\n    Swal.fire(\n      title,\n      body,\n      'error'\n    ).then((resp => {\n      this.loginButton = false;\n    }))\n  }\n\n  handleFirebaselogout() {\n\n  }\n\n}","<div class=\"container-fluid\">\n\t<div class=\"row\">\n\t  <div class=\"col-sm-4\">\n\t\t<img class=\"bg\" src=\"assets/imgs/bg.png\" alt=\"\">\n\n\t\t<div class=\"col-sm-4 login-section-wrapper\">\n\t\t  <div class=\"brand-wrapper\">\n\t\t\t<img src=\"assets/img/marketin.png\" alt=\"logo\" class=\"logo\">\n\t\t  </div>\n\t\t  <div class=\"login-wrapper my-auto\">\n\t\t\t  <div class=\"form-group\">\n\t\t\t\t<img class=\"icon\" src=\"assets/imgs/usuario.svg\" alt=\"\">\n\t\t\t\t<input [(ngModel)]=\"email\" type=\"email\" name=\"email\" id=\"email\" class=\"form-control ip\" placeholder=\"Usuario\">\n\t\t\t  </div>\n\t\t\t  <br>\n\t\t\t  <div class=\"form-group mb-4\">\n\t\t\t\t<img class=\"icon\" src=\"assets/imgs/lock.png\" alt=\"\">\n\t\t\t\t<input [(ngModel)]=\"password\" type=\"password\" name=\"password\" id=\"password\" class=\"form-control ip\" placeholder=\"Contraseña\">\n\t\t\t  </div>\n\t\t\t  <button (click)=\"handleLogin()\" class=\"btn buton\">INGRESAR</button>\n\t\t\t<br> <br>\n\t\t\t<!-- <a href=\"#!\" class=\"forgot-password-link\">¿Olvidaste tu contraseña?</a> -->\n\t\t\t<!-- <p class=\"login-wrapper-footer-text\">¿Olvidaste tu contraseña? </p> -->\n\t\t  </div>\n\t\t</div>\n\t  </div>\n\t  <div class=\"col-sm-8 px-0 d-none d-sm-block\">\n\t\t<h1 class=\"label\">Administrador</h1>\n\t\t<h1 class=\"label2\">MARKET IN</h1>\n\t\t<!-- <h1 class=\"label3\">Industrial Hivimar</h1> -->\n\n\t\t<p class=\"label-p\">Sistema de control interno MARKETIN</p>\n\t\t<img src=\"assets/imgs/bg_login.png\" alt=\"login image\" class=\"login-img\">\n\t  </div>\n\t</div>\n  </div>\n"]}